# 虚拟滚动
## 痛点
当表格数据太多时，会渲染出太多的DOM元素(例如100行100列的数据，会渲染出10000个td元素)，出现严重的卡顿。
## 思考过程
想到两种方案：懒加载和虚拟滚动。
懒加载：即首次只渲染当前显示节点，当滚动时再插入后面的节点，懒加载的问题在于只能解决首次渲染的问题，后面仍会渲染所有的dom节点。
虚拟滚动：即只显示当前可视区域的节点，当滚动时改变动态更新可视区域的节点。好处在于可以复用已渲染的dom节点。
所以最好的方案是采取虚拟滚动

## 基本思路
1. 模拟滚动
    1. 构建一个虚拟区域，宽高等于完整表格
    2. 创建一个可视区域的的表格
2. 滚动情况判断：
   1. 判断是否需要更新表格数据,找到滚动高度距离表格中最近的行，作为可视表格的起始行，然后计算显示行，开始渲染。
## 实现过程

1. 根据饿了么的[再谈前端虚拟列表的实现](https://zhuanlan.zhihu.com/p/34585166)，实现了虚拟滚动的vue组件，但是存在问题：如果元素的长度不同时，在滚动的过程中仍会增删元素，会影响性能。在我实现虚拟滚动的表格时，因为要实现横纵双向虚拟滚动，dom元素的成倍增加，导致页面会出现明显的卡顿。
2. 根据谷歌的[无尽滚动的复杂度 -- 来自 Google 大神的拆解](https://juejin.im/post/58a3c81e128fe10058c57a8b#heading-1 )，通过DOM回收的机制，最大程度利用已经创建的DOM元素，尽最大可能减少dom的消耗。


## 参考

[再谈前端虚拟列表的实现](https://zhuanlan.zhihu.com/p/34585166)

[无尽滚动的复杂度 -- 来自 Google 大神的拆解](https://juejin.im/post/58a3c81e128fe10058c57a8b#heading-1 )

